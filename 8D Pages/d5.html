<section class="container">
  <link rel="stylesheet" href="/assets/8d.css">
  <div class="card header toolbar">
    <div>
      <div class="h-title">D5 — Select & Verify Corrective Actions ✅</div>
      <div class="h-sub">Choose permanent solutions and verify them.</div>
    </div>
    <div class="controls">
      <div class="timestamp">Last updated: <span id="d5-timestamp">Never</span></div>
      <select id="d5-status-select" class="input select-compact status-select" data-id="d5">
        <option value="pending">Pending</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <button class="btn btn-primary save-btn" data-id="d5"><i class="fas fa-save"></i> Save</button>
    </div>
  </div>

  <div class="card">
    <div class="section-title">5A. Selection & Verification of Corrective Action</div>
    <table id="d5-actions" class="table dynamic-table">
      <thead><tr><th><i class="fa-solid fa-up-down-left-right"></i> Action (PCA)</th><th><i class="fa-solid fa-diagram-project"></i> Root Cause</th><th><i class="fa-solid fa-calendar-days"></i> Target Date</th><th><i class="fa-solid fa-user"></i> Responsibility</th><th><i class="fa-solid fa-shield"></i> Mistake Proof</th><th><i class="fa-solid fa-dollar-sign"></i> Estimated Cost</th><th><i class="fa-solid fa-arrow-trend-up"></i> Expected Benefit</th><th><i class="fa-solid fa-square-check"></i> Verification</th><th></th></tr></thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="9"><button class="add-row-btn btn btn-ghost">Add PCA</button></td></tr></tfoot>
      <template>
        <tr draggable="true">
          <td><span class="drag-handle" title="Drag to reorder">⋮⋮</span> <input class="input pca-action"/></td>
          <td><select class="input pca-root"><option value="">Select Root Cause</option></select></td>
          <td><input class="input pca-date" type="date"/></td>
          <td><input class="input"/></td>
          <td class="mistake-proof-cell"><label class="switch"><input type="checkbox" class="mp-check"/><span class="slider"></span></label></td>
          <td><input class="input" type="number" placeholder="$"/></td>
          <td><input class="input" placeholder="Benefit"/></td>
          <td><select class="input verify-select"><option>Pending</option><option>Verified</option></select></td>
          <td><button class="remove-row-btn btn btn-danger">Remove</button></td>
        </tr>
      </template>
    </table>

    <div class="mt-small">
      <label class="label">5B. Corrective Action Images / Documents</label>
      <input class="preview-file multi-file-input" type="file" multiple />
      <div id="d5-file-list" class="small mt-xs"></div>
    </div>

    <div class="mt-small">
      <label class="label">5C. Selected Permanent Corrective Action</label>
      <textarea id="d5-selectedPCA" class="input"></textarea>
      <div class="small" id="d5-pca-counter">0 characters</div>
    </div>

    <div class="mt-small">
      <div class="section-title">Timeline (Gantt)</div>
      <div id="d5-gantt" class="card" style="padding:.5rem"></div>
    </div>
  </div>

  <div class="card">
    <div class="section-title">Verification Checklist</div>
    <div class="controls mt-xs">
      <input id="d5-new-check" class="input" placeholder="Add checklist item" />
      <button id="d5-add-check" class="btn btn-ghost">Add</button>
    </div>
    <div id="d5-checklist" class="dynamic-list mt-small"></div>
  </div>

  <script src="/assets/8d-forms.js"></script>
  <script>window.__init8D && window.__init8D(document);</script>
</section>
