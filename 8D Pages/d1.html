<section class="container">
  <link rel="stylesheet" href="/assets/8d.css">
  <div class="card header toolbar">
    <div>
      <div class="h-title">D1 â€” Identify Team ðŸ‘¥</div>
      <div class="h-sub">Assemble the right team to solve the problem. Minimal clicks â€” add members quickly.</div>
    </div>
    <div class="controls">
      <div class="timestamp">Last updated: <span id="d1-timestamp">Never</span></div>
      <select id="d1-status-select" class="input select-compact status-select" data-id="d1">
        <option value="pending">Pending</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <button class="btn btn-primary save-btn" data-id="d1" aria-label="Save D1"><i data-lucide="save"></i> Save</button>
    </div>
  </div>

  <datalist id="contact-directory"></datalist>

  <div class="card">
    <div class="section-title">Key Point of Contact</div>
    <div class="hint">Add one or more primary contacts for this 8D.</div>
    <table class="table dynamic-table" id="d1-kpoc-table">
      <thead><tr><th>Name</th><th>Title</th><th>Email</th><th>Phone Number</th><th></th></tr></thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="5"><button type="button" class="add-row-btn btn btn-ghost"><i data-lucide="plus"></i> Add Contact</button></td></tr></tfoot>
      <template>
        <tr>
          <td><input class="input contact-name" list="contact-directory" placeholder="Full name of primary contact" /></td>
          <td><input class="input contact-title" placeholder="Job title" /></td>
          <td><input class="input contact-email" placeholder="name@company.com" /></td>
          <td><input class="input contact-phone" placeholder="(555) 555-5555" /></td>
          <td><button type="button" class="remove-row-btn btn btn-danger" aria-label="Remove"><i data-lucide="trash-2"></i></button></td>
        </tr>
      </template>
    </table>
  </div>

  <div class="card">
    <div class="section-title">Team Members (Champion)</div>
    <div class="hint">Add one or more champions/sponsors for escalation and authority.</div>
    <table class="table dynamic-table" id="d1-champions-table">
      <thead><tr><th>Name</th><th>Title</th><th>Email</th><th>Phone Number</th><th></th></tr></thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="5"><button type="button" class="add-row-btn btn btn-ghost"><i data-lucide="plus"></i> Add Champion</button></td></tr></tfoot>
      <template>
        <tr>
          <td><input class="input contact-name" list="contact-directory" placeholder="Full name" /></td>
          <td><input class="input contact-title" placeholder="Job title" /></td>
          <td><input class="input contact-email" placeholder="name@company.com" /></td>
          <td><input class="input contact-phone" placeholder="(555) 555-5555" /></td>
          <td><button type="button" class="remove-row-btn btn btn-danger" aria-label="Remove"><i data-lucide="trash-2"></i></button></td>
        </tr>
      </template>
    </table>
  </div>

  <div class="card">
    <div class="section-title">Team Members</div>
    <div class="hint">Capture detailed member data or use quick-add for notes.</div>
    <div class="row mt-small">
      <div class="col">
        <input id="d1-new-member" class="input" placeholder="e.g., John Doe - Quality Engineer" />
      </div>
      <div class="col col-fixed">
        <button id="d1-add-member-btn" class="btn btn-primary">Add</button>
        <button id="d1-add-me" class="btn btn-ghost">Add Me</button>
        <button id="d1-clear-members" class="btn btn-ghost">Clear</button>
      </div>
    </div>
    <div id="d1-members-list" class="dynamic-list mt-small soft-list"></div>

    <div class="mt-small">
      <table class="table dynamic-table" id="d1-team-table">
        <thead>
          <tr><th>Name</th><th>Role</th><th>Title</th><th>Email</th><th>Phone Number</th><th></th></tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr><td colspan="6"><button type="button" class="add-row-btn btn btn-ghost"><i data-lucide="plus"></i> Add Team Member</button></td></tr>
        </tfoot>
        <template>
          <tr>
            <td><input class="input contact-name" list="contact-directory" placeholder="Full name" /></td>
            <td>
              <select class="input member-role">
                <option>Team Lead</option>
                <option>Quality Engineer</option>
                <option>Design Engineer</option>
                <option>Sponsor</option>
                <option>Operator</option>
                <option>Supplier</option>
                <option>Other</option>
              </select>
            </td>
            <td><input class="input contact-title" placeholder="Job title" /></td>
            <td><input class="input contact-email" placeholder="name@company.com" /></td>
            <td><input class="input contact-phone" placeholder="(555) 555-5555" /></td>
            <td><button type="button" class="remove-row-btn btn btn-danger" aria-label="Remove"><i data-lucide="trash-2"></i></button></td>
          </tr>
        </template>
      </table>
      <div class="mt-small">
        <button id="d1-schedule-meeting" class="btn btn-ghost"><i class="fa-solid fa-calendar-days"></i> Schedule Meeting</button>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="section-title">Team Cards</div>
    <div id="d1-team-cards" class="team-cards-grid mt-small"></div>
  </div>

  <div class="card">
    <div class="section-title">Team Org Chart</div>
    <div id="d1-org-chart" class="mt-small"></div>
  </div>

  <div class="card">
    <div class="section-title">Notes & Contact Visibility</div>
    <textarea id="d1-notes" class="input" placeholder="Any notes about the team, availability, or constraints..."></textarea>
  </div>

  <script src="/assets/8d-forms.js"></script>
  <script>
    window.__init8D && window.__init8D(document);
    document.addEventListener('click', (e)=>{
      if(e.target && e.target.id === 'd1-clear-members'){
        document.getElementById('d1-members-list').innerHTML='';
      }
    });
  </script>
</section>
