<section class="container">
  <link rel="stylesheet" href="/assets/8d.css">
  <div class="card header toolbar">
    <div>
      <div class="h-title">D2 ‚Äî Problem Description üìù</div>
      <div class="h-sub">Thoroughly define and document the problem. Attach visuals and audit the current process.</div>
    </div>
    <div class="controls">
      <div class="timestamp">Last updated: <span id="d2-timestamp">Never</span></div>
      <select id="d2-status-select" class="input select-compact status-select" data-id="d2">
        <option value="pending">Pending</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <button class="btn btn-primary save-btn" data-id="d2"><i class="fas fa-save"></i> Save</button>
    </div>
  </div>

  <div class="card">
    <div class="section-title">Problem Definition</div>
    <label class="label" for="d2-problemStatement">2A. Problem Description</label>
    <textarea id="d2-problemStatement" class="input" data-required placeholder="Full story of the problem..."></textarea>

    <div class="row">
      <div class="col">
        <label class="label" for="d2-impactCustomer">2C. Impact on Customer</label>
        <input id="d2-impactCustomer" class="input" placeholder="How customers are affected" />
      </div>
      <div class="col">
        <label class="label" for="d2-briefStatement">2B. Problem Statement (concise)</label>
        <input id="d2-briefStatement" class="input" data-required placeholder="One-sentence problem statement" />
      </div>
    </div>

    <div class="section-title mt-small">2D. Problem Description Images / Documents</div>
    <div class="file-block card">
      <label class="label">Upload images or documents</label>
      <div class="file-input">
        <input class="preview-file" type="file" id="d2-evidence" />
        <div class="file-preview small"></div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="section-title">Current Process & Situation Analysis <span class="badge badge-in-progress">Multiple entries supported</span></div>

    <div class="small">2E. Current Process Audit</div>
    <table class="table dynamic-table" id="d2-process-audit">
      <thead><tr><th>Process Step</th><th>Potential Root Cause</th><th>Action (Y/N)</th><th></th></tr></thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="4"><button type="button" class="add-row-btn btn btn-ghost">Add Row</button></td></tr></tfoot>
      <template>
        <tr>
          <td><input class="input" placeholder="Step (e.g., Assembly)" /></td>
          <td><input class="input" placeholder="Possible cause" /></td>
          <td>
            <select class="input"><option>Yes</option><option>No</option></select>
          </td>
          <td><button type="button" class="remove-row-btn btn btn-danger">Remove</button></td>
        </tr>
      </template>
    </table>

    <div class="small mt-small">2F. Current Process Control Documentary</div>
    <table class="table dynamic-table" id="d2-docs">
      <thead><tr><th>Document</th><th>Reviewed (Y/N)</th><th>Current RPN</th><th></th></tr></thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="4"><button type="button" class="add-row-btn btn btn-ghost">Add Document</button></td></tr></tfoot>
      <template>
        <tr>
          <td><input class="input" placeholder="Document name (PFMEA, Control Plan)" /></td>
          <td>
            <select class="input"><option>Yes</option><option>No</option></select>
          </td>
          <td><input class="input" placeholder="Current RPN" type="number" /></td>
          <td><button type="button" class="remove-row-btn btn btn-danger">Remove</button></td>
        </tr>
      </template>
    </table>

    <div class="row mt-small">
      <div class="col">
        <label class="label" for="d2-situationBefore">2G. Situation Before Countermeasure</label>
        <textarea id="d2-situationBefore" class="input"></textarea>
      </div>
      <div class="col">
        <label class="label" for="d2-before-graphs">2H. Situation Before (Graphs / Images)</label>
        <div class="file-block">
          <input class="preview-file" id="d2-before-graphs" type="file" />
          <div class="file-preview small"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/assets/8d-forms.js"></script>
  <script>window.__init8D && window.__init8D(document);</script>
</section>
